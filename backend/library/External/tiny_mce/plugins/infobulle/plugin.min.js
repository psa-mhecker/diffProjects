tinymce.PluginManager.add("infobulle",function(e){function t(){var t=e.dom,l=e.selection,n=l.getNode(),o=t.getParent(n,"span.has-tip.infobulle")?t.getParent(n,"span.has-tip.infobulle"):"",i=t.getAttrib(o,"title")?t.getAttrib(o,"title"):"";e.windowManager.open({title:"Infobulle",body:[{name:"infotext",multiline:!0,type:"textbox",size:100,label:"Tooltip text",value:i,autofocus:!0}],onsubmit:function(t){e.execCommand("mceInsertContent",!1,e.dom.createHTML("span",{"class":"has-tip infobulle",title:t.data.infotext,"aria-haspopup":"true","data-tooltip":""},e.getParam("info_icon_value")))}})}function l(){var t=e.dom,l=e.selection,n=l.getNode(),o=t.getParent(n,"span.has-tip.infobulle");return"SPAN"==n.tagName?void t.remove(o,1):void e.formatter.remove("infobulle")}var n="/../../../../External/tiny_mce/plugins/infobulle/";tinymce.addI18n("fr",{"Add tooltip":"Ajouter un infobulle","Remove tooltip":"Enlever l'infobulle","Tooltip name":"Nom de l'infobulle","Tooltip text":"info text"}),e.contentStyles.push("span.has-tip.infobulle{cursor:default;color: #FFFFFF;display:inline-block;-webkit-user-select:all;-webkit-user-modify:read-only;-moz-user-select:all;-moz-user-modify:read-only;user-select:all;user-modify:read-only;background-color: #FF0000;padding: 0 3px;}"),e.on("click",function(t){var l=t.target,n=e.dom,o=e.selection;/^(IMG|HR)$/.test(l.nodeName)&&(t.preventDefault(),o.getSel().setBaseAndExtent(l,0,l,1)),"SPAN"==l.nodeName&&n.hasClass(l,"infobulle")&&(t.preventDefault(),o.select(l))}),e.addButton("infobulle",{tooltip:"Add tooltip",onclick:t,stateSelector:"span.has-tip.infobulle",image:tinymce.plugins.infobulle+n+"img/infobulle.png"}),e.addButton("uninfobulle",{tooltip:"Remove tooltip",onclick:l,stateSelector:"span.has-tip.infobulle",image:tinymce.plugins.infobulle+n+"img/uninfobulle.png"}),e.addMenuItem("infobulle",{icon:tinymce.plugins.infobulle+n+"img/infobulle.png",text:"Infobulle",context:"insert",onclick:t})});
